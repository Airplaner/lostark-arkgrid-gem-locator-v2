<script lang="ts">
  import type { LocalizationName } from '../../lib/constants/enums';
  import { appConfig, toggleUI } from '../../lib/state/appConfig.state.svelte';
  import { appLocale } from '../../lib/state/locale.state.svelte';

  const guideImages = import.meta.glob<string>('../assets/guide/*.png', {
    eager: true,
    import: 'default',
  });
  const LTitle: LocalizationName = {
    ko_kr: 'ê°€ì´ë“œ',
    en_us: 'Guide',
  };
  let locale = $derived(appLocale.current);
</script>

<div class="guide">
  <div class="title">
    <span>ğŸ“ï¸ {LTitle[locale]}</span>
    <button class="fold-button" onclick={() => toggleUI('showGemRecognitionGuide')}
      >{appConfig.current.uiConfig.showGemRecognitionGuide ? 'â–²' : 'â–¼'}</button
    >
  </div>
  <div class="content" hidden={!appConfig.current.uiConfig.showGemRecognitionGuide}>
    {#if locale === 'ko_kr'}
      <p>
        1. ê²Œì„ì—ì„œ ì ¬ ëª©ë¡ í™”ë©´ì„ ì—° ë’¤ ëª¨ë“  ì ¬ì„ ì¥ì°© í•´ì œí•´ì£¼ì„¸ìš”.<br />
        ì•ˆ ì“°ëŠ” ì•„í¬ ê·¸ë¦¬ë“œ í”„ë¦¬ì…‹ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ì†ì‰½ê²Œ ì ¬ì„ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
      <p>2. [ğŸ–¥ï¸ í™”ë©´ ê³µìœ  ì‹œì‘] ë²„íŠ¼ì„ í†µí•´ ë¡œìŠ¤íŠ¸ì•„í¬ ê²Œì„ í™”ë©´ì„ ê³µìœ í•´ì£¼ì„¸ìš”</p>
      <img src={guideImages['../assets/guide/2.png']} alt="guide-img2" />
      <p>
        2. ë§ˆìš°ìŠ¤ê°€ ì ¬ì„ ê±´ë“œë¦¬ì§€ ì•Šë„ë¡ ìŠ¤í¬ë¡¤ë°” ìœ„ì— ìœ„ì¹˜ì‹œí‚¤ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ìŠ¤í¬ë¡¤ì„
        ë‚´ë¦¬ë©´ì„œ ì¸ì‹ëœ ì ¬ì´ ëª©ë¡ì— ì¶”ê°€ë˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”.
      </p>
      <p>
        3. ìˆ˜ì§‘ëœ ì ¬ì˜ ê°œìˆ˜ë¥¼ í™•ì¸í•˜ê³ , <b>ì§ˆì„œì™€ í˜¼ëˆ ëª¨ë“  ì ¬</b>ì´ ìˆ˜ì§‘ë˜ì—ˆìœ¼ë©´ [âœ… í˜„ì¬ í”„ë¡œí•„ì—
        ë°˜ì˜] ë²„íŠ¼ì„ ëˆŒëŸ¬ í”„ë¡œí•„ì— ì €ì¥í•´ì£¼ì„¸ìš”.
      </p>
      <br />
      <h2>FAQ</h2>
      <p>
        Q. í™”ë©´ ê³µìœ ì— ì‹¤íŒ¨í•˜ê±°ë‚˜ ê±°ë¶€í•˜ì˜€ë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤.<br />
        A. ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ í¬ë¡¬ í˜¹ì€ ì—£ì§€ ë¸Œë¼ìš°ì €ë¡œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
      </p>
      <p>
        Q. ì ¬ì´ ì¸ì‹ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br />
        A. [ğŸ”¨ ê³µìœ  ì¤‘ì¸ í™”ë©´ ë³´ê¸°]ë¥¼ ëˆŒëŸ¬ ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
      </p>
      <ol>
        <li>ê²Œì„ í™”ë©´ì´ ì˜¬ë°”ë¥´ê²Œ ê°±ì‹  ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.</li>
        <li>
          ì ¬ ì˜µì…˜ì„ ì¶”ì¶œí•˜ëŠ” ì˜ì—­ì´ ì‹¤ì œ ìœ„ì¹˜ì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ê²Œì„ í•´ìƒë„ë¥¼ "1920x1080 (16:9)"ë¡œ
          í™”ë©´ì„ "ì°½ ëª¨ë“œ"ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”.
        </li>
        <li>
          ì ¬ ì˜µì…˜ì„ ì¶”ì¶œí•˜ëŠ” ì˜ì—­ ì¤‘ ì¼ë¶€ê°€ ë¹¨ê°›ê²Œ ë˜ì–´ ìˆë‹¤ë©´ ìƒë‹¨ 'í—ˆìš© ì˜¤ì°¨ ë²”ìœ„' ìŠ¬ë¼ì´ë”ë¥¼
          ë†’í˜€ì„œ ì‹œë„í•´ì£¼ì„¸ìš”.
        </li>
        <br />
      </ol>
    {/if}{#if locale === 'en_us'}
      <div class="content">
        <p>
          1. Open an Astrogem list and unequip all.<br />
          You can switch to an unused Ark Grid preset to quickly unequip all astrogems.
        </p>
        <p>2. Press the [ğŸ–¥ï¸ Start Screen Sharing] button to share your Lost Ark game screen.</p>
        <img src={guideImages['../assets/guide/2.png']} alt="guide-img2" />
        <p>
          3. Keep the mouse above the scrollbar so it does not touch the astrogems. Scroll down and
          verify that recognized astrogems are being added to the list.
        </p>
        <p>
          4. Check the number of collected astrogems. Once <b>all Order and Chaos astrogems</b> are collected,
          press the [âœ… Apply to Current Profile] button to save them to your profile.
        </p>
        <br />
        <h2>FAQ</h2>
        <p>
          Q. I get a message saying screen sharing failed or was denied.<br />
          A. Please use Chrome or Edge browser.
        </p>
        <p>
          Q. Astrogems are not being recognized.<br />
          A. Press the [ğŸ”¨ Display Shared Screen] and check the following:
        </p>
        <ol>
          <li>Make sure the game screen is updating properly.</li>
          <li>
            If the area used to extract astrogem options does not match the actual screen, set the
            game resolution to "1920x1080 (16:9)" and switch to "windowed mode".
          </li>
          <li>
            If parts of the extraction area are highlighted in red, try increasing the â€œRecognition
            Tolerance Rangeâ€ slider at the top.
          </li>
        </ol>
        <p>Or contact the developer on Discord DM via the site footer</p>
      </div>
    {/if}
  </div>
</div>

<style>
  .guide {
    border: 1px solid var(--border);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    border-radius: 0.4rem;
    background-color: var(--card-inner);
    padding: 1rem;
    width: 100%;
    box-sizing: border-box;
    gap: 10px;
    display: flex;
    flex-direction: column;
  }
  .guide > .title {
    font-weight: 700;
    font-size: 1.4rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.4rem;
  }
  .guide img {
    max-width: 100%;
    height: auto;
    display: block;
  }
  .fold-button {
    flex: 1;
    text-align: right;
    border: none;
    background: none;
  }
</style>
